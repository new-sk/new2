# 6-3. 데이터베이스 성능 개선

### **가. 성능 개선 방법론** 

이렇게 하면 더 빠르게 활용할 수 있어요

<br>

성능 개선 목표
- 처리 능력 (Throughput) = 트랜잭션 수 / 시간
- 처리 시간 : 작업 완료 시간, 배치 작업 성능지표 (병렬처리, 풀스캔, 해쉬조인, 메모리확보, 병목제거, 파티션활용)
- 응답 시간 : 사용자가 키 누른 이후 응답 시간, OLTP시스템 성능지표 (인덱스활용, 부분범위처리, Nest-Loop조인, 정렬최소하, 잠김발생억제, 하드파싱제거)
- 로드 시간 : 정기적/비정기적 데이터 로드 (로그없는다이렉트로드, 병렬처리, IO경합없도록, 인덱스삭제후로드, 파티션활용)

성능 개선 절차
- 분석 : 자료수집 / 목표설정
- 이행 : 패러미터조정, 전략적저장기법, SQL최적화, 분산설계, 인덱스설계
- 평가

성능 개선 접근방법
- 내부적인 부분에서 외부적인 부분으로 접근 : 어플리케이션 - DBMS서버 - 외부환경 튜닝

성능 개선 도구
- DBMS별로 유사
- Oracle : StatsPack(성능관련데이터수집,리포트), SQL트레이스(SQL의 통계치 및 대기 이벤트 수집, TKPROF로 리포트)
- IBM UDB : 스냅샹 모니터(스냅샹 취할때 DB 활동 상태), 이벤트 모니터(이벤트나 전이가 발생할 때), SQL 모니터링(액세스 플랜)

<br>


### **나. 조인(Join)** 

두 테이블 사이의 연결인 JOIN에 대해서 알아보아요

<br>

이떠한 방법으로 조인을 하더라도 결과값은 동일하지만, 성능상에서는 많이 차이가 발생 가능하다

Nested-Loop 조인
- 연결고리(조인 컬럼)에 인덱스가 있어야 한다
- 출력 순서
- 연결순서
- 이용 : 인덱스필요, 처리량 적을 경우, 부분 범위 용이, 드라이빙 테이블 선택 중요

Sort-Merge 조인
- 동등(=) 조인에 한해 수행 가능
- 조인 컬럼값으로 각각 소팅을 수행한 후에 머지함
- 연결고리에 인덱스가 없는 경우 발생
- OLTP에서는 사용할 수 없고, 배치일 경우에도 Sort Area 부족할 수도 있음
- 이용 : 드라이빙 조건이 독립적, 처리 대상이 전체 일때, 연결고리 없을 때, 정렬사이즈 변경할수도 있음

Hash 조인
- Hash는 Sort-Merge에서 sort에 대한 부하 많은 것을 Hash활용함으로 해결
- 사이즈 작은 테이블에서 해쉬값 생성(build input), 큰 테이블에서 해쉬 통해 조인 수행(Probe Input)
- Hash Area만으로 hash table 생성이 불충분하면 Hash Table Overflow 발생
- 이용 : 대용량 데이터, 범위를 줄일 수 있을 때, 병행 처리로 속도 향상 가능할 때, 메모리 사이즈 조정해서 속도 향상 가능할때

### **다. 애플리케이션 성능 개선** 

데이터베이스가 이렇게 생겼어요

<br>

개념적 DBMS 아키텍처
- 데이터베이스(데이터,임시,시스템,로그) + 인스턴스(메모리,프로세스)

<br>


### **라. 서버 성능 개선**

메롱

<br>

메롱2